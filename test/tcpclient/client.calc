package main

import (
    "github.com/Chronostasys/calc/runtime/generator"
    "github.com/Chronostasys/calc/runtime/coro"
    "github.com/Chronostasys/calc/runtime/libuv"
    "github.com/Chronostasys/calc/runtime"
)

func getchar() byte

func main() void {
    client := libuv.NewTCPClient()
    j := func () coro.Task<int> async {
        str := "118.31.105.213"
        await client.ConnectAsync(str,443)
        await client.WriteBufAsync("Hello world!\n")
        buf := await client.ReadBufAsync(10000)
        ss := runtime.newstr(buf.Data,buf.Len)
        ss.Print()
        return 0
    }
    j()
    for {
        getchar()
    }
    return
}